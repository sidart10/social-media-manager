# Generate LinkedIn Content Workflow
# Purpose: Fast-track LinkedIn content with professional dark tech aesthetic
# Status: PRODUCTION READY v1.0

name: generate-linkedin
description: "Quick LinkedIn carousel/image generation with dark design, MCP-powered, includes captions and hashtags"
author: "AI Image Generator Agent"
version: "1.0.0"

# Configuration paths
config_source: "{agent-folder}/ai-image-generator-sidecar/config.yaml"
template_folder: "{agent-folder}/ai-image-generator-sidecar/templates"
output_folder: "{agent-folder}/ai-image-generator-sidecar/outputs"
platform_specs: "{agent-folder}/ai-image-generator-sidecar/platform-specs.yaml"
best_practices: "{agent-folder}/ai-image-generator-sidecar/best-practices-framework.md"

# Workflow type
template: false

# LinkedIn presets
linkedin_preset:
  aspect_ratio: "16:9"
  size_mapped: "1536x1024"
  design: "dark_monochrome_tech"
  background: "#0B0B0B"
  text_color: "#FFFFFF"
  font: "Inter, weight 300"
  provider: "openai"
  quality: "high"

# Workflow Instructions
instructions:
  - step: 1
    goal: "Understand what user needs"

    <action>Greet: "Let's create LinkedIn content with professional dark tech aesthetic."</action>

    <ask>What's your topic or main message?</ask>

    <action>Store user input as {{topic}}</action>

    <ask>Content type?
    1. Carousel (3-7 slides recommended)
    2. Single image
    3. Technical diagram
    </ask>

    <action>Store selection as {{content_type}}</action>

  - step: 2
    goal: "Get content-specific details"

    <check if="content_type == 1">
      <ask>How many slides? (Enter 3-7)</ask>
      <action>Store as {{slide_count}}</action>

      <check if="slide_count > 7">
        <action>Warn: "7+ slides may lose engagement. LinkedIn sweet spot is 3-5 slides."</action>
      </check>

      <ask>What's the carousel structure?
      1. Framework/Process explanation
      2. Product feature showcase
      3. Tutorial/How-to guide
      4. Let me describe it myself
      </ask>

      <action>Store as {{structure_type}}</action>

      <check if="structure_type == 4">
        <ask>Describe the content for each slide:</ask>
        <action>Store detailed description as {{custom_structure}}</action>
      </check>
    </check>

    <check if="content_type == 2">
      <ask>What should this single image communicate?</ask>
      <action>Store as {{single_message}}</action>
    </check>

    <check if="content_type == 3">
      <ask>Diagram type?
      1. System architecture (boxes and arrows)
      2. Process workflow (numbered steps)
      3. Comparison chart
      </ask>
      <action>Store as {{diagram_type}}</action>

      <ask>How many components/steps?</ask>
      <action>Store as {{component_count}}</action>
    </check>

  - step: 3
    goal: "Load or build template with LinkedIn defaults"

    <action>Check for existing matching templates in template_folder</action>

    <check if="content_type == carousel AND structure_type == 1">
      <action>Found match: TEST-linkedin-carousel-ai-agents.json</action>
      <ask>Use AI Agent Architecture template as base? [y/n]</ask>

      <check if="yes">
        <action>Read: {template_folder}/TEST-linkedin-carousel-ai-agents.json</action>
        <action>Adapt template: Replace topic/content with {{topic}} details</action>
        <action>Keep design system and structure</action>
      </check>

      <check if="no">
        <action>Build new template from scratch</action>
      </check>
    </check>

    <check if="no existing template OR user declined">
      <action>Build template JSON on-the-fly:</action>
      <action>
      {
        "prompt_metadata": {
          "content_type": "linkedin_carousel_tech",
          "creative_goal": "{{topic}} with professional dark aesthetic",
          "target_audience": "Technical professionals, business leaders",
          "design_system": "high_contrast_monochrome_tech"
        },
        "platform_specs": {
          "platform": "linkedin",
          "aspect_ratio": "16:9",
          "count": {{slide_count}},
          "file_format": "PNG"
        },
        "design_system": {
          "colors": {
            "background_primary": "#0B0B0B",
            "text_primary": "#FFFFFF",
            "text_secondary": "#D4D4D4",
            "card_background": "#181818"
          },
          "typography": {
            "primary_font": "Inter, sans-serif",
            "main_heading": "56pt, weight 300",
            "subheading": "28pt, weight 300",
            "body_text": "22pt, weight 300"
          }
        },
        "slides": [
          // Build based on user requirements
        ],
        "global_negative_prompt": [
          "cluttered, busy, colorful backgrounds, gradients",
          "low contrast, small fonts, stock photos",
          "3D renders, drop shadows, glows",
          "light backgrounds, cartoons, amateur"
        ]
      }
      </action>

      <action>For each slide, create comprehensive prompt using user's {{topic}} and content details</action>
      <action>Apply LinkedIn design system to each slide prompt</action>
      <action>Add negative prompts to prevent common failures</action>
    </check>

    <action>Store final template as {{template}}</action>

  - step: 4
    goal: "Confirm and prepare"

    <action>Display generation plan:</action>
    <action>
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    LinkedIn Content Generation Plan
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    Topic: {{topic}}
    Type: {{content_type_name}}
    Slides: {{slide_count OR "1"}}

    Specifications:
    • Size: 1536×1024px (16:9 landscape)
    • Design: Dark monochrome tech
    • Quality: High (enterprise-grade)
    • Provider: OpenAI gpt-image-1 via MCP

    Estimated Time: {{(slide_count OR 1) × 3}} seconds

    Output Location:
    {{output_folder}}/linkedin-{{topic_slug}}/

    ✨ Includes:
    • High-quality PNG images
    • Metadata JSON files
    • LinkedIn caption & hashtags
    • Alt-text for accessibility
    • Posting guide

    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    </action>

    <ask>Proceed with generation? [y/n]</ask>

    <check if="no">
      <ask>What would you like to adjust?</ask>
      <goto step="1">Return to start</goto>
    </check>

  - step: 5
    goal: "Setup and validate"

    <action>Create topic slug: lowercase {{topic}}, replace spaces/special chars with hyphens</action>
    <action>Store as {{topic_slug}}</action>

    <action>Create output directory:</action>
    <action>Bash: mkdir -p "{{output_folder}}/linkedin-{{topic_slug}}"</action>

    <action>Validate MCP tool availability (should be working from setup)</action>

    <action>Initialize counters:</action>
    <action>- total_slides = {{slide_count OR 1}}</action>
    <action>- current_slide = 0</action>
    <action>- start_time = now</action>

  - step: 6
    goal: "Generate images via MCP"

    <for-each>slide in template.slides (or single image)</for-each>

    <action>current_slide += 1</action>

    <action>Show progress:</action>
    <action>"🎨 Generating Slide {{current_slide}} of {{total_slides}}... (est. 3 seconds)"</action>

    <action>Extract from slide object:</action>
    <action>- prompt_text = slide.prompt</action>
    <action>- negative_prompts = slide.negative_prompt OR template.global_negative_prompt</action>
    <action>- accent_color = slide.theme_color (if exists)</action>

    <action>Construct complete prompt:</action>
    <action>full_prompt = prompt_text (negatives are already in prompt for OpenAI)</action>

    <action>Record slide_start_time</action>

    <critical>Call MCP tool for image generation:</critical>
    <action>
    Use tool: mcp__gpt-image-1__create_image
    Parameters:
      prompt: {{full_prompt}}
      size: "1536x1024"
      quality: "high"
      output_format: "png"
      n: 1

    Store result as {{mcp_result}}
    </action>

    <action>Record slide_end_time</action>
    <action>Calculate: generation_seconds = slide_end_time - slide_start_time</action>

    <action>Extract MCP output path from mcp_result.file_paths[0]</action>
    <action>Store as {{mcp_output_path}}</action>

    <action>Define agent output path:</action>
    <action>agent_output_path = "{{output_folder}}/linkedin-{{topic_slug}}/slide{{current_slide}}.png"</action>

    <action>Copy image from MCP location to agent location:</action>
    <action>Bash: cp "{{mcp_output_path}}" "{{agent_output_path}}"</action>

    <action>Get file size:</action>
    <action>Bash: ls -lh "{{agent_output_path}}" | awk '{print $5}'</action>
    <action>Store as {{file_size}}</action>

    <action>Create metadata JSON file using Write tool:</action>
    <action>
    File: {{output_folder}}/linkedin-{{topic_slug}}/slide{{current_slide}}_metadata.json

    Content:
    {
      "slide_number": {{current_slide}},
      "total_slides": {{total_slides}},
      "topic": "{{topic}}",
      "template_used": "{{template_name OR 'generated_on_the_fly'}}",
      "prompt_full": "{{full_prompt}}",
      "provider": "openai",
      "model": "gpt-image-1",
      "tool": "mcp__gpt-image-1__create_image",
      "size": "1536x1024",
      "aspect_ratio_requested": "16:9",
      "aspect_ratio_actual": "3:2",
      "quality": "high",
      "output_format": "png",
      "timestamp": "{{ISO-8601 timestamp}}",
      "generation_time_seconds": {{generation_seconds}},
      "file_path_mcp": "{{mcp_output_path}}",
      "file_path_agent": "linkedin-{{topic_slug}}/slide{{current_slide}}.png",
      "file_size": "{{file_size}}",
      "design_system": "dark_monochrome_tech",
      "accent_color": "{{accent_color OR '#4ADE80'}}",
      "platform": "linkedin",
      "quality_score": {
        "clarity": 0,
        "technical_quality": 0,
        "composition": 0,
        "color_accuracy": 0,
        "typography": 0,
        "professionalism": 0,
        "prompt_accuracy": 0,
        "overall": 0,
        "reviewed": false,
        "notes": "Review manually after generation"
      }
    }
    </action>

    <action>Show completion:</action>
    <action>"✅ Slide {{current_slide}} complete! ({{file_size}})"</action>

    <template-output>slide_{{current_slide}}_generated</template-output>

  - step: 7
    goal: "Generate LinkedIn post content"

    <action>Calculate total generation time and file sizes</action>

    <action>Analyze carousel/image content to generate intelligent caption:</action>

    <action>Generate LinkedIn caption following these rules:</action>
    <action>
    Structure:
    1. Hook (first line - grab attention)
    2. Value proposition (why this matters)
    3. Key points (3-5 bullets or short paragraphs)
    4. Call-to-action (engage, follow, share)

    Tone: Professional but approachable
    Length: 150-300 characters ideal (max 3000)

    Example format:
    "Modern AI agents are changing how we build software 🤖

    Here's the architecture that makes it possible:
    → Modular design for flexibility
    → Tool integration for real-world actions
    → Memory systems for context
    → Planning layers for strategy

    Swipe through to see how each component works together.

    Building AI agents? What challenges are you facing?

    #AIEngineering #SoftwareArchitecture #MachineLearning"
    </action>

    <action>Generate topic-relevant hashtags:</action>
    <action>Rules: 3-5 hashtags, mix of broad and niche, check trending in tech</action>
    <action>Example: #AI #MachineLearning #{{topic_keywords}}</action>

    <action>Generate accessibility alt-text (max 125 chars):</action>
    <action>Describe: What's in the image, key text, visual elements</action>
    <action>Example: "Dark slide showing AI agent architecture with 5 connected components in green accents"</action>

    <action>Create POST_CONTENT.md file:</action>
    <action>
    Write: {{output_folder}}/linkedin-{{topic_slug}}/POST_CONTENT.md

    Content:
    # LinkedIn Post Content - {{topic}}

    ## 📝 Caption (Copy & Paste)

    {{generated_caption}}

    ## 🏷️ Hashtags

    {{generated_hashtags}}

    ## ♿ Alt Text (Accessibility)

    {{For each slide if carousel, else single}}
    **Slide {{N}}:** {{alt_text}}

    ## 📊 LinkedIn Posting Best Practices

    **Best Times to Post:**
    - Tuesday-Thursday: 8-10am or 12-2pm (your timezone)
    - Avoid weekends (50% less engagement)

    **Engagement Tips:**
    - Post during business hours
    - Respond to comments in first hour (boosts algorithm)
    - Tag relevant people/companies (max 5)
    - Ask a question to encourage comments
    - Share to relevant LinkedIn groups

    **Carousel Tips:**
    - First slide is CRITICAL (stops the scroll)
    - End with strong CTA
    - Preview on mobile before posting
    - Consider adding text overlay on slide 1

    ## 📱 How to Post

    1. Go to LinkedIn → Start a post
    2. Click "Add media" → Upload all {{slide_count}} images in order
    3. Paste caption above
    4. Add hashtags (LinkedIn will suggest more)
    5. Preview: Check carousel flow
    6. Add alt-text: Click each image → "Edit" → Paste alt-text
    7. Tag people if relevant
    8. Post!

    ## 🎯 Expected Performance

    Carousels on LinkedIn typically get:
    - 2-3x more reach than single images
    - Higher engagement rate
    - More profile visits
    - Better in feed algorithm

    Pro tip: Comment your own post after 5 min with additional insights!

    ---

    Generated: {{timestamp}}
    Tool: AI Image Generator Agent
    </action>

  - step: 8
    goal: "Create carousel summary document"

    <action>Calculate statistics:</action>
    <action>- Total file size (sum all images)</action>
    <action>- Total generation time</action>
    <action>- Average time per slide</action>

    <action>Create CAROUSEL_SUMMARY.md:</action>
    <action>
    Write: {{output_folder}}/linkedin-{{topic_slug}}/CAROUSEL_SUMMARY.md

    Content:
    # {{topic}} - LinkedIn Content Summary

    **Generated:** {{timestamp}}
    **Topic:** {{topic}}
    **Type:** {{content_type_name}}
    **Slides:** {{slide_count OR 1}}
    **Platform:** LinkedIn

    ## 📊 Specifications

    - **Size:** 1536×1024px (16:9 landscape)
    - **Format:** PNG
    - **Quality:** High (enterprise-grade)
    - **Design:** Dark monochrome tech aesthetic
    - **Provider:** OpenAI gpt-image-1 via MCP
    - **Generation Time:** {{total_time}} seconds ({{average_time}}s per slide)
    - **Total File Size:** {{total_size}}MB

    ## 📁 Generated Files

    {{For each slide:}}
    {{N}}. slide{{N}}.png ({{size}}) - {{description}}
       slide{{N}}_metadata.json - Generation parameters

    {{Also:}}
    - POST_CONTENT.md - Caption, hashtags, alt-text, posting guide
    - CAROUSEL_SUMMARY.md - This file

    ## 🎨 Design System Applied

    **Colors:**
    - Background: Deep black (#0B0B0B)
    - Text: White (#FFFFFF) / Light gray (#D4D4D4)
    - Accents: {{list theme colors used}}
    - Cards: Dark gray (#181818)

    **Typography:**
    - Font: Inter, sans-serif
    - Weights: 300 (light), 500 (medium)
    - Hierarchy: 72pt hero → 56pt heading → 28pt sub → 22pt body

    **Layout:**
    - 12-column grid system
    - Padding: 96px horizontal, 72px top
    - Generous negative space (35-60%)
    - Clean alignment

    ## ✅ Quality Checklist

    Review each slide:
    - [ ] Text is legible (check on mobile)
    - [ ] Colors match brand
    - [ ] Professional appearance
    - [ ] No spelling errors
    - [ ] Consistent design across slides
    - [ ] High contrast (WCAG AAA)

    ## 🚀 Ready to Post!

    See POST_CONTENT.md for caption and posting instructions.

    Location: {{output_folder}}/linkedin-{{topic_slug}}/
    </action>

    <template-output>summary_created</template-output>

  - step: 9
    goal: "Present complete package"

    <action>Show final output:</action>
    <action>
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    🎉 LinkedIn Content Package Complete!
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    Topic: {{topic}}
    Type: {{content_type_name}}
    {{If carousel: Slides: {{slide_count}}}}

    Generated in {{total_time}} seconds

    📁 Your Files:
    {{List each file with size}}

    📍 Location:
    {{output_folder}}/linkedin-{{topic_slug}}/

    📝 Ready to Post:
    ✅ Images generated
    ✅ Caption written
    ✅ Hashtags suggested
    ✅ Alt-text created
    ✅ Posting guide included

    Open POST_CONTENT.md to see your LinkedIn post!
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    </action>

    <action>List files using Bash:</action>
    <action>Bash: ls -lh "{{output_folder}}/linkedin-{{topic_slug}}/"</action>

  - step: 10
    goal: "Next actions"

    <ask>What would you like to do?
    1. Review quality (score slides with 7-pillar system)
    2. Regenerate specific slide
    3. Edit caption/hashtags
    4. Create another LinkedIn post
    5. Done (I'll post it)
    </ask>

    <check if="option 1">
      <action>For each slide, run quality evaluation:</action>
      <ask>Review slide{{N}}.png visually, then score:

      Clarity (1-10): Message clear in <3 seconds?
      Technical Quality (1-10): Sharp, no artifacts?
      Composition (1-10): Good balance?
      Color Accuracy (1-10): Matches dark design?
      Typography (1-10): Text legible?
      Professionalism (1-10): Enterprise-grade?
      Prompt Accuracy (1-10): Elements present?
      </ask>

      <action>Calculate overall score (average of 7 pillars)</action>

      <action>Update metadata JSON with scores using Write tool</action>

      <check if="overall_score < 7">
        <action>Show: "Score {{overall_score}}/10 - Refinement recommended"</action>
        <action>Analyze low-scoring pillars and suggest improvements</action>
        <ask>Regenerate with improvements? [y/n]</ask>

        <check if="yes">
          <ask>What specific changes should I make to the prompt?</ask>
          <action>Update slide prompt</action>
          <goto step="6">Regenerate this slide only</goto>
        </check>
      </check>

      <check if="overall_score >= 7">
        <action>Show: "✅ Score {{overall_score}}/10 - Great quality!"</action>
      </check>
    </check>

    <check if="option 2">
      <ask>Which slide number to regenerate? (1-{{slide_count}})</ask>
      <action>Load slide{{N}}_metadata.json</action>
      <ask>What changes to make to the prompt?</ask>
      <action>Update prompt with requested changes</action>
      <action>Regenerate slide via MCP</action>
      <action>Save as slide{{N}}_v2.png (keep original)</action>
      <action>Update metadata</action>
    </check>

    <check if="option 3">
      <action>Read: POST_CONTENT.md</action>
      <ask>What would you like to change? (caption/hashtags/alt-text)</ask>
      <action>Update requested section</action>
      <action>Write updated POST_CONTENT.md</action>
      <action>Show: "✅ Post content updated!"</action>
    </check>

    <check if="option 4">
      <goto step="1">Start new LinkedIn content</goto>
    </check>

    <check if="option 5">
      <action>Show: "Great! Your LinkedIn content is ready to post. Good luck! 🚀"</action>
    </check>

# Validation checklist
validation:
  required_outputs:
    - "slide*.png files (or single image)"
    - "slide*_metadata.json files"
    - "POST_CONTENT.md"
    - "CAROUSEL_SUMMARY.md"

  linkedin_requirements:
    - "Size: 1536x1024 (acceptable for LinkedIn)"
    - "Format: PNG"
    - "File size: < 10MB per image"
    - "Professional aesthetic"
    - "High contrast (WCAG AAA)"
    - "Text legible on mobile"

  content_requirements:
    - "Caption appropriate for LinkedIn"
    - "Hashtags relevant"
    - "Alt-text descriptive"
    - "Posting guide included"

# Notes for agent
execution_notes: |
  This workflow is optimized for SPEED and LINKEDIN specifically.

  Key differences from general carousel:
  - Preset to 16:9 landscape (LinkedIn's best format)
  - Dark monochrome tech design (professional default)
  - Auto-generates caption + hashtags + alt-text
  - Includes LinkedIn posting best practices
  - Fewer questions = faster execution

  MCP integration:
  - Uses mcp__gpt-image-1__create_image (verified working)
  - 3-second generation (vs 90 seconds direct API)
  - Copies from MCP default location to agent outputs/
  - Saves comprehensive metadata

  Expected user experience:
  - User says: "Create LinkedIn carousel about AI agents"
  - 3-4 questions answered
  - ~10-20 seconds later: Complete package ready to post

  This is the PRIMARY workflow for LinkedIn content creation.
