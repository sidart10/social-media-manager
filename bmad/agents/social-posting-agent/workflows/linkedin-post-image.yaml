name: linkedin-post-image
description: Post to LinkedIn with single image

instructions: |
  # LinkedIn Single Image Post Workflow

  Post to your personal LinkedIn account with one image.

  ## Steps

  ### 1. Gather Post Text

  Ask the user for the post caption:
  - "What would you like to say with your image?"
  - "Text is optional but recommended"
  - "LinkedIn optimal: 150-300 words"

  **Store as**: `post_text`

  ### 2. Gather Image Path

  Ask for the image file path:
  - "Provide the path to your image"
  - "Supported formats: JPG, PNG, GIF"
  - "Recommended: Under 10MB"

  **Important**: Must be ABSOLUTE path!

  Example:
  - `/Users/sid/Desktop/image.jpg`
  - `/Users/sid/Desktop/4. Coding Projects/social-media-manager/sid-car.jpeg`

  **Store as**: `image_path`

  ### 3. Optional: Ask for Alt Text

  For accessibility:
  - "Would you like to add alt text for the image? [yes/no]"

  If yes:
  - "Describe the image (for screen readers):"
  - "Max 120 characters recommended"

  **Store as**: `alt_text` (optional)

  ### 4. Validate Input

  ```javascript
  import { existsSync } from 'fs';
  import { stat } from 'fs/promises';
  import { extname } from 'path';

  const errors = [];
  const warnings = [];

  // Check text
  if (post_text && post_text.length > 3000) {
    errors.push('Text exceeds 3,000 character limit');
  }

  // Check image exists
  if (!existsSync(image_path)) {
    errors.push(`Image not found: ${image_path}`);
  } else {
    // Check format
    const ext = extname(image_path).toLowerCase();
    const validFormats = ['.jpg', '.jpeg', '.png', '.gif'];
    if (!validFormats.includes(ext)) {
      errors.push(`Unsupported format: ${ext} (use JPG, PNG, or GIF)`);
    }

    // Check size
    const stats = await stat(image_path);
    const sizeMB = stats.size / (1024 * 1024);
    if (sizeMB > 10) {
      warnings.push(`Image is ${sizeMB.toFixed(1)}MB - may exceed pixel limit`);
    }
  }

  if (errors.length > 0) {
    console.log('✗ Validation errors:');
    errors.forEach(error => console.log(`  - ${error}`));
    return;
  }

  if (warnings.length > 0) {
    console.log('⚠️  Warnings:');
    warnings.forEach(warning => console.log(`  - ${warning}`));
  }
  ```

  ### 5. Show Preview

  ```
  Preview:
  ─────────────────────────────────────────
  Platform: LinkedIn
  Text: [post_text]
  Image: [filename] (X.X MB)
  Alt Text: [alt_text if provided]
  ─────────────────────────────────────────
  ```

  Ask for confirmation: "Post this to LinkedIn? [yes/no]"

  ### 6. Post to LinkedIn

  ```javascript
  import { LinkedInClient } from './bmad/modules/linkedin-api-client/index.js';

  const client = new LinkedInClient();

  console.log('Uploading image to LinkedIn...');

  const result = await client.postWithImage(post_text, image_path, alt_text || '');

  if (result.success) {
    console.log('✅ Posted to LinkedIn with image successfully!');
    console.log();
    console.log('Details:');
    console.log(`  Post ID: ${result.id}`);
    console.log(`  Post URN: ${result.urn}`);
    console.log(`  Text length: ${post_text.length} characters`);
    console.log(`  Image: Uploaded`);
    console.log();
    console.log('View your post on LinkedIn!');
    console.log('(Check your LinkedIn profile feed)');

    // Show rate limits
    const stats = client.getRateLimitStats();
    console.log();
    console.log('Rate Limits:');
    console.log(`  Today: ${stats.counts.daily}/${stats.limits.DAILY} posts`);
    console.log(`  Remaining: ${stats.remaining.daily} posts`);
  } else {
    console.log('✗ Failed to post to LinkedIn');
    console.log(`  Error: ${result.error}`);

    if (result.error.includes('Not authenticated')) {
      console.log();
      console.log('Solution: Authenticate with LinkedIn first');
      console.log('  1. Run: client.getAuthUrl()');
      console.log('  2. Open URL in browser and authorize');
      console.log('  3. Get code from callback');
      console.log('  4. Run: client.authenticate(code)');
    } else if (result.error.includes('Image upload failed')) {
      console.log();
      console.log('Solution: Check image file');
      console.log('  - Verify path is correct and absolute');
      console.log('  - Check file size (recommended under 10MB)');
      console.log('  - Ensure format is JPG, PNG, or GIF');
    }
  }
  ```

  ## Example Usage

  ```
  User: "I want to post an image to LinkedIn"

  Agent: "What would you like to say with your image?"

  User: "Check out this amazing car I saw today! 🚗

  Beautiful design and engineering.

  #automotive #design #photography"

  Agent: "Provide the path to your image"

  User: "/Users/sid/Desktop/4. Coding Projects/social-media-manager/sid-car.jpeg"

  Agent: "Would you like to add alt text for the image? [yes/no]"

  User: "yes"

  Agent: "Describe the image (for screen readers):"

  User: "Red sports car on a city street"

  Agent:
  Preview:
  ─────────────────────────────────────────
  Platform: LinkedIn
  Text: Check out this amazing car...
  Image: sid-car.jpeg (1.2 MB)
  Alt Text: Red sports car on a city street
  ─────────────────────────────────────────

  Post this to LinkedIn? [yes/no]

  User: "yes"

  Agent: "Uploading image to LinkedIn..."

  ✅ Posted to LinkedIn with image successfully!

  Details:
    Post ID: 7123456789012345678
    Post URN: urn:li:share:7123456789012345678
    Text length: 89 characters
    Image: Uploaded

  View your post on LinkedIn!
  (Check your LinkedIn profile feed)

  Rate Limits:
    Today: 1/150 posts
    Remaining: 149 posts
  ```

  ## Tips

  1. **Image Quality**: Use high-resolution images (LinkedIn supports large files)
  2. **Alt Text**: Highly recommended for accessibility
  3. **File Paths**: Always use absolute paths
  4. **Text with Image**: Don't just post image - add engaging caption

  ## Common Issues

  ### "Image not found"
  - Use absolute path, not relative
  - Check for typos
  - Ensure file exists

  ### "Image upload failed"
  - File may be too large
  - Format may not be supported
  - Check file permissions

  ### "Not authenticated"
  - Complete OAuth flow first
  - Token may have expired (60 days)
  - Re-authenticate if needed

  ## Processing Time

  - Upload image: ~2-3 seconds
  - Create post: ~1-2 seconds
  - **Total:** ~3-5 seconds

  ## Notes

  - Posts to your personal LinkedIn account
  - Visibility: Public (main feed)
  - For multiple images, use multi-image workflow
  - For PDFs, use document workflow
